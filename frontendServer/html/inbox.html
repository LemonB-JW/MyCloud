<!DOCTYPE html>
<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <!-- <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script> -->



</head>
<body>
<table class="table table-condensed table-hover">
    <thead>
    <tr>
        <th class="span1"><input type="checkbox"></th>
        <th class="span2"></th>
        <th class="span2"></th>
        <th class="span9"></th>
        <th class="span2"></th>
    </tr>
    </thead>
    <tbody id="item-list">
    <tr class="item">
        <td class="checkbox">
            <input type="checkbox">
            <a href="#"> <i class="icon-star-empty"></i>
            </a>
        </td>
        <td class="item-from"><strong>John Doe</strong>
        </td>
        <td class="item-title">
            <span class="label pull-right">Notifications</span>
        </td>
        <td class="item-date">
            <strong>11:23 PM</strong>
        </td>
    </tr>
    </tbody>
</table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


<script>
	window.onload = (event) => {
		var url = "/inbox_items";
		var req = JSON.stringify({});

		// // make AJAX call
		// $.ajax(
		// 		url,
		// 		req,
		// 		// successful callback
		// 		function(res) {
        //             console.log(res);
        //             //
        //             var items = JSON.parse(res);
        //             //
        //             // console.log("3\n");
		// 			// if (!items || items.length === 0) {
		// 			// 	showWarningMessage('No recommended item. Make sure you have favorites.');
		// 			// } else {
		// 			// 	listItems(items);
		// 			// }
		// 		},
		// 		// failed callback
		// 		function() {
        //             console.log('failed.');
        //         });
        $.get(url, function(items) {
            listItems(items);
        });
	};

	function listItems(items) {
		// Clear the current results
		var itemList = $('item-list');
		itemList.innerHTML = '';

		var id = 0;
		for (var key in items) {
            if (items.hasOwnProperty(key)) {
                addItem(itemList, items[key], id++);
            }
        }
	}

	function addItem(itemList, item, id) {
		// create the <tr> tag and specify the id and class attributes
        var tr = document.createElement('tr');
        tr.id = 'item-' + id;
        tr.className = 'item';

        var table = document.getElementsByClassName('table table-condensed table-hover');
 console.log(table[0]);

        //TODO: add checkbox
 		// "MAIL FROM"
        var from = document.createElement('td');
        from.innerHTML = item.from;

        var title = document.createElement('td');
        title.innerHTML = item.title;

        var date = document.createElement('td');
        date.innerHTML = item.date;

        tr.appendChild(from);
		tr.appendChild(title);
		tr.appendChild(date);

        var list = document.createElement('tbody');
        console.log(list);

        list.appendChild(tr);
        table[0].appendChild(list);
	}


</script>

</body>
</html>